<!-- 测试页 - 流畅答题体验 -->
<view class="test-page">

  <!-- 背景图片 -->
  <image
    src="/assets/images/background.png"
    class="page-background"
    mode="aspectFill"
  />

  <!-- 题目区域 -->
  <view class="question-container">
    <!-- <text class="question-dimension">{{currentQuestion.dimension === 'anxiety' ? '焦虑维度' : '回避维度'}}</text> -->
    <text class="question-text">{{currentQuestionIndex + 1}}. {{currentQuestion.text}}</text>
  </view>

  <!-- 主要内容区域 -->
  <view class="test-content">
    <!-- 选项区域 -->
    <view class="options-container">
      <view
        wx:for="{{scaleOptions}}"
        wx:key="value"
        class="option-item {{selectedOption === item.value ? 'selected' : ''}}"
        bindtap="selectOption"
        data-value="{{item.value}}"
      >
        <text class="option-label">{{item.label}}</text>
        <image
          wx:if="{{selectedOption === item.value}}"
          src="/assets/icons/check.svg"
          class="option-check"
          mode="aspectFit"
        />
      </view>
    </view>

    <!-- 进度条区域 -->
    <view class="progress-bar-container">
      <view class="progress-bar-fill" style="width: {{indicatorPosition}}%;">
        <image
        src="/assets/images/xiaoba2.png"
        class="progress-indicator"
        style="left: {{indicatorPosition}}%"
        mode="aspectFit"
        />
      </view>
    </view>
  </view>

  <!-- 导航区域 -->
  <view class="navigation-section">

    <button class="nav-button nav-button-prev" bindtap="goToPrevious" disabled="{{currentQuestionIndex === 0}}">
      <image src="/assets/icons/arrow-left.svg" class="nav-button-icon-left" mode="aspectFit" />
      <text>上一题</text>
    </button>

    <button
      wx:if="{{!isLastQuestion}}"
      class="nav-button nav-button-next"
      bindtap="goToNext"
      disabled="{{!selectedOption}}"
    >
      <text>下一题</text>
      <image src="/assets/icons/arrow-right.svg" class="nav-button-icon-right" mode="aspectFit" />
    </button>

    <button
      wx:else
      class="nav-button nav-button-complete"
      bindtap="completeTest"
      disabled="{{!selectedOption}}"
    >
      <text>完成测试</text>
      <image src="/assets/icons/check.svg" class="nav-button-icon-complete" mode="aspectFit" />
    </button>
  </view>
</view>