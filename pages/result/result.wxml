<!-- 结果页 - 新版布局（Tailwind风格） -->
<view class="result-page">

  <image
    src="/assets/images/background.png"
    class="page-background"
    mode="aspectFill"
  />

  <!-- Header区 -->
  <view class="result-header">
    <view class="header-container">
      <!-- 左侧：标题和标签 -->
      <view class="header-left">
        <text class="header-title">你的依恋类型为：</text>
        <text class="attachment-title attachment-title-{{resultSummary.style}}">{{resultSummary.title}}</text>
        <view class="tag-container">
          <view wx:for="{{resultSummary.labels}}" wx:key="index" class="tag">
            <text class="tag-text">#{{item}}</text>
          </view>
        </view>
        <text class="per-title">约<text class="percentage-bold percentage-bold-{{resultSummary.style}}">{{resultSummary.percentage}}</text>人是该类型</text>
      </view>

      <!-- 右侧：插画盒子 -->
      <view class="header-right">
        <view class="illustration-box">
          <image src="{{resultSummary.illustrationImage}}" class="illustration-image" mode="aspectFit" />
        </view>
      </view>
    </view>
  </view>

  <view class="metrics-section">
    <view class="radar-container">
      <text class="section-title">依恋维度分布</text>
      <radar-chart
        id="radarChart"
        data="{{radarChartData}}"
        indicators="{{indicators}}"
        theme-color="#4680FF"
        size-ratio="0.25"
        area-opacity="0.4"
        show-score="{{true}}"
      ></radar-chart>
    </view>

    <!-- 右侧："关于你"卡片 -->
    <view class="about-card">
      <view class="card-header">
        <text class="card-title">关于你</text>
      </view>
      <view class="card-content">
        <text class="card-text">{{resultSummary.summary}}</text>
      </view>
    </view>
  </view>

  <!-- 数据区（Grid Layout，三列） -->
  <view class="data-section">
    <view class="data-grid">
      <!-- 相似动物 -->
      <view class="data-card animal-card">
        <text class="data-label">相似动物</text>
        <text class="data-value">{{animalData.animal}}</text>
        <text class="data-icon">{{animalData.icon}}</text>
        <text class="data-description">{{animalData.description}}</text>
      </view>

      <!-- 高焦虑% -->
      <view class="data-card anxiety-card">
        <text class="data-label">高焦虑%</text>
        <text class="data-value">{{dataMetrics.highAnxiety}}%</text>
        <text class="data-description">{{scores.anxiety.interpretation}}</text>
      </view>

      <!-- 高回避% -->
      <view class="data-card avoidance-card">
        <text class="data-label">高回避%</text>
        <text class="data-value">{{dataMetrics.highAvoidance}}%</text>
        <text class="data-description">{{scores.avoidance.interpretation}}</text>
      </view>
    </view>
  </view>

  <!-- 底部详情卡片 -->
  <view class="detail-section">
    <view class="detail-card">
      <text class="detail-title">底层逻辑</text>
      <view class="detail-content">
        <view wx:for="{{resultSummary.logic}}" wx:key="index" >
          <text>{{item}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 底部操作区域 -->
  <view class="action-section">
    <button class="retake-btn" bindtap="retakeTest">重新测试</button>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{isLoading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">加载结果中...</text>
  </view>

  <!-- 错误状态 -->
  <view wx:if="{{hasError}}" class="error-container">
    <text class="error-icon">⚠️</text>
    <text class="error-title">加载失败</text>
    <text class="error-message">{{errorMessage}}</text>
    <button class="retry-btn" bindtap="retryLoading">重试</button>
  </view>

</view>